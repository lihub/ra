{% extends "base.html" %}

{% block title %}{{ content.risk_assessment('page_title') }}{% endblock %}

{% block content %}
<div class="assessment-container">
    <div class="assessment-header">
        <h1>{{ content.risk_assessment('header_title') }}</h1>
        <p>{{ content.risk_assessment('header_subtitle') }}</p>
    </div>

    <form id="risk-form" class="risk-form">
        <div class="form-section">
            <h3>{{ content.risk_assessment('investment_amount_title') }}</h3>
            <div class="input-group">
                <label for="investment_amount">{{ content.risk_assessment('investment_amount_label') }}</label>
                <input type="number" id="investment_amount" name="investment_amount" 
                       min="1000" step="1000" value="10000" required>
                <span class="currency">{{ content.risk_assessment('currency') }}</span>
            </div>
        </div>

        <!-- KYC Questions -->
        <div class="kyc-questions">
            <h3>{{ content.risk_assessment('kyc_title') }}</h3>
            <p>{{ content.risk_assessment('kyc_subtitle') }}</p>
            
            <!-- Question 1: Time Horizon -->
            <div class="question-group">
                <h4>{{ content.risk_assessment('kyc_question_1_title') }}</h4>
                <div class="options">
                    <label><input type="radio" name="horizon_score" value="0" required> {{ content.risk_assessment('kyc_question_1_option_1') }}</label>
                    <label><input type="radio" name="horizon_score" value="20"> {{ content.risk_assessment('kyc_question_1_option_2') }}</label>
                    <label><input type="radio" name="horizon_score" value="50"> {{ content.risk_assessment('kyc_question_1_option_3') }}</label>
                    <label><input type="radio" name="horizon_score" value="75"> {{ content.risk_assessment('kyc_question_1_option_4') }}</label>
                    <label><input type="radio" name="horizon_score" value="100"> {{ content.risk_assessment('kyc_question_1_option_5') }}</label>
                </div>
            </div>

            <!-- Question 2: Loss Tolerance -->
            <div class="question-group">
                <h4>{{ content.risk_assessment('kyc_question_2_title') }}</h4>
                <div class="options">
                    <label><input type="radio" name="loss_tolerance" value="0" required> {{ content.risk_assessment('kyc_question_2_option_1') }}</label>
                    <label><input type="radio" name="loss_tolerance" value="25"> {{ content.risk_assessment('kyc_question_2_option_2') }}</label>
                    <label><input type="radio" name="loss_tolerance" value="60"> {{ content.risk_assessment('kyc_question_2_option_3') }}</label>
                    <label><input type="radio" name="loss_tolerance" value="100"> {{ content.risk_assessment('kyc_question_2_option_4') }}</label>
                </div>
            </div>

            <!-- Question 3: Experience -->
            <div class="question-group">
                <h4>{{ content.risk_assessment('kyc_question_3_title') }}</h4>
                <div class="options">
                    <label><input type="radio" name="experience_score" value="20" required> {{ content.risk_assessment('kyc_question_3_option_1') }}</label>
                    <label><input type="radio" name="experience_score" value="0"> {{ content.risk_assessment('kyc_question_3_option_2') }}</label>
                    <label><input type="radio" name="experience_score" value="70"> {{ content.risk_assessment('kyc_question_3_option_3') }}</label>
                    <label><input type="radio" name="experience_score" value="100"> {{ content.risk_assessment('kyc_question_3_option_4') }}</label>
                </div>
            </div>

            <!-- Question 4: Financial Capacity -->
            <div class="question-group">
                <h4>{{ content.risk_assessment('kyc_question_4_title') }}</h4>
                <div class="options">
                    <label><input type="radio" name="financial_score" value="20" required> {{ content.risk_assessment('kyc_question_4_option_1') }}</label>
                    <label><input type="radio" name="financial_score" value="50"> {{ content.risk_assessment('kyc_question_4_option_2') }}</label>
                    <label><input type="radio" name="financial_score" value="75"> {{ content.risk_assessment('kyc_question_4_option_3') }}</label>
                    <label><input type="radio" name="financial_score" value="100"> {{ content.risk_assessment('kyc_question_4_option_4') }}</label>
                </div>
            </div>

            <!-- Question 5: Investment Goal -->
            <div class="question-group">
                <h4>{{ content.risk_assessment('kyc_question_5_title') }}</h4>
                <div class="options">
                    <label><input type="radio" name="goal_score" value="0" required> {{ content.risk_assessment('kyc_question_5_option_1') }}</label>
                    <label><input type="radio" name="goal_score" value="25"> {{ content.risk_assessment('kyc_question_5_option_2') }}</label>
                    <label><input type="radio" name="goal_score" value="60"> {{ content.risk_assessment('kyc_question_5_option_3') }}</label>
                    <label><input type="radio" name="goal_score" value="100"> {{ content.risk_assessment('kyc_question_5_option_4') }}</label>
                </div>
            </div>

            <!-- Question 6: Sleep Test -->
            <div class="question-group">
                <h4>{{ content.risk_assessment('kyc_question_6_title') }}</h4>
                <div class="options">
                    <label><input type="radio" name="sleep_score" value="0" required> {{ content.risk_assessment('kyc_question_6_option_1') }}</label>
                    <label><input type="radio" name="sleep_score" value="30"> {{ content.risk_assessment('kyc_question_6_option_2') }}</label>
                    <label><input type="radio" name="sleep_score" value="70"> {{ content.risk_assessment('kyc_question_6_option_3') }}</label>
                    <label><input type="radio" name="sleep_score" value="100"> {{ content.risk_assessment('kyc_question_6_option_4') }}</label>
                </div>
            </div>

            <!-- Inconsistency Warnings -->
            <div id="kyc-warnings" class="warnings hidden">
                <h4>{{ content.risk_assessment('kyc_warnings_title') }}</h4>
                <div id="warning-messages"></div>
                <p><small>{{ content.risk_assessment('kyc_warnings_subtitle') }}</small></p>
            </div>
        </div>

        <!-- Investment Duration (Hidden Field) -->
        <input type="hidden" name="investment_duration" value="10">

        <button type="submit" class="submit-button">
            {{ content.risk_assessment('calculate_button') }}
        </button>
    </form>

    <div id="portfolio-results" class="portfolio-results hidden">
        <h2>{{ content.risk_assessment('results_title') }}</h2>
        <div class="portfolio-summary">
            <div class="summary-stats">
                <div class="stat">
                    <h4>{{ content.risk_assessment('expected_return_label') }}</h4>
                    <span id="expected-return">-</span>
                </div>
                <div class="stat">
                    <h4>{{ content.risk_assessment('volatility_label') }}</h4>
                    <span id="volatility">-</span>
                </div>
                <div class="stat">
                    <h4>Sharpe Ratio</h4>
                    <span id="sharpe-ratio">-</span>
                </div>
            </div>
        </div>
        <div class="portfolio-chart">
            <canvas id="portfolioChart"></canvas>
        </div>
        <div class="portfolio-details" id="portfolio-details">
            <!-- Portfolio allocation details will be populated here -->
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="/static/js/risk-assessment.js"></script>
{% endblock %}